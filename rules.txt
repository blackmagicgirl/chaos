; Chaos v0.2
; based on CrazyMod 9
`
clear

; misc parameters

def parameters
nb_of_resource_types 2 ; gold, wood


; resource deposits

def goldmine
class deposit
resource_type 0 ; gold
extraction_time 3
extraction_qty 1

def wood
class deposit
resource_type 1 ; wood
extraction_time 20
extraction_qty 2



; races

;def human_race
;class race



; Misc or unused elements

def u_recall
class upgrade
cost 50 0
time_cost 120


def a_teleportation
class ability
requirements u_teleportation
mana_cost 150
effect teleportation
effect_target ask
effect_range inf
universal_notification 1

def a_summon_dragon
class ability
requirements u_summon_dragon
mana_cost 150
effect summon 120 2 dragon

def u_teleportation
class upgrade
cost 50 0
time_cost 120

def u_meteors
class upgrade
cost 50 0
time_cost 120

def u_deadly_fog
class upgrade
cost 50 0
time_cost 120

def u_conversion
class upgrade
cost 50 0
time_cost 120
requirements castle

def u_summon_dragon
class upgrade
cost 50 0
time_cost 120

def u_exorcism
class upgrade
cost 50 0
time_cost 120

def u_resurrection
class upgrade
cost 50 0
time_cost 120
requirements castle

;def a_improved_wood_gathering
;effect bonus stored_wood --
;requirements lumbermill

def scouttower
class building
provides_survival 0
cost 6 2
hp_max 33
time_cost 60
bonus_height 1 ; can see the adjacent squares
is_buildable_anywhere 1

def instant_death ; used by some maps to create dead units
class effect
harm_level 10000
harm_target_type
decay 1

def quicksand ; or surface
class effect
harm_level 1
harm_target_type ground unit

def footman
class soldier
cost 6 0
time_cost 12
hp_max 15
speed 1.5
can_use melee_weapon melee_armor
armor 0.5
armor_bonus 1
range 1
cooldown 1.5
damage 4.5
damage_bonus 2.5

def new_flyingmachine
class soldier
cost 5 5
food_cost 1
time_cost 10
airground_type air
hp_max 30
speed 1.5
bonus_height 1 ; can see the adjacent squares
is_repairable 1
is_healable 0
transport_capacity 8
transport_volume 99
corpse 0

def flyingmachine
class soldier
cost 20 10
food_cost 3
time_cost 30
airground_type air
hp_max 30
speed 1.5
requirements temple magestower
bonus_height 1 ; can see the adjacent squares
range 4.5
cooldown 1.5
damage 8
target_types ground air
is_repairable 1
is_healable 0
transport_volume 99
corpse 0
is_a_detector 1






; Elements common to multiple races

; Common buildings

def starting_point
class building
cost 0 0
time_cost 135
storable_resource_types 0 1
can_upgrade_to small_fort city_hall garage graveyard clearing encampment fairy_ring hideout
; can_train peasant

def townhall
is_a starting_point

def lumbermill
class building
cost 6 9
hp_max 200
time_cost 68
storable_resource_types 1
can_research archer_weapon archer_armor archer_range 
storage_bonus 0 1 ; gold bonus is +0, wood bonus is +1

def blacksmith
class building
cost 8 10
time_cost 90
hp_max 266.7
can_research melee_weapon melee_armor 

def explosives_magazine
class building
cost 18 15
hp_max 120
time_cost 90
can_research high_quality_explosives highest_quality_explosives
can_use a_make_explosives_magazine_explode
mana_max 200
mana_regen 0.3

def barrier
class building
food_provided 0
is_buildable_on_exits_only 1
provides_survival 0

def basic_wall
is_a barrier
cost 0 0
hp_max 500
time_cost 90

def basic_gate
is_a barrier
cost 0 0
hp_max 450
time_cost 90
is_a_gate 1




; common units

def peasant
class worker
cost 4 0
food_cost 1
time_cost 10
hp_max 4
speed 1.5
;can_use a_improved_wood_gathering
range 0.8
cooldown 1
damage 1.5
armor 0

def thorny_plant
class soldier
is_teleportable 0
food_cost 0
hp_max 8
speed 0
cooldown 1
target_types ground
range 0.25
damage 0.3
is_healable 0
corpse 0
transport_volume 99

def nothing
decay 1

; common upgrades

def horse_speed
class upgrade
cost 22 6
time_cost 80
effect apply_bonus speed

def melee_weapon
class upgrade
cost 8 10
time_cost 60
effect apply_bonus damage

def melee_armor
class upgrade
cost 8 10
time_cost 60
effect apply_bonus armor

def archer_weapon
class upgrade
cost 8 10
time_cost 60
effect bonus damage 1.5

def archer_armor
class upgrade
cost 8 10
time_cost 60
effect bonus armor 0.5

def archer_range
class upgrade
cost 8 10
time_cost 60
effect bonus range 1

def high_quality_explosives
class upgrade
cost 30 10
time_cost 150
effect bonus damage 1.66

def highest_quality_explosives
class upgrade
cost 66 16
time_cost 300
requirements high_quality_explosives
effect bonus damage 2.66




; common skills

def small_explosion
class effect
harm_level 60
harm_target_type ground

def large_explosion
class effect
harm_level 800

def a_make_explosives_magazine_explode
class ability
mana_cost 200
effect summon 2 large_explosion
universal_notification 1

def a_bewitchment
class ability
mana_cost 75
effect conversion
effect_target ask




; traditional

def traditional
class race
townhall small_fort
farm farm
peasant serf
easy c_traditional
aggressive traditional


; traditional buildings

def small_fort
class building
cost 12 16
food_provided 1
hp_max 400
time_cost 135
storable_resource_types 0 1
can_train serf
can_upgrade_to keep

def keep
is_a small_fort
cost 22 32 ; this is the total cost
time_cost 315 ; this is the total cost
hp_max 800
requirements barracks
can_upgrade_to castle

def castle
is_a keep
cost 42 58 ; this is the total cost
time_cost 675 ; this is the total cost
hp_max 1600
requirements barracks lumbermill blacksmith stables
range 2
damage 3
cooldown 4
can_upgrade_to ; starting_point

def farm
class building
cost 5 5
requirements small_fort
food_provided 8
hp_max 133.3
time_cost 45

def barracks
class building
cost 7 9
time_cost 90
requirements small_fort
hp_max 266.7
can_train crossbowman knight

def stables
class building
cost 10 14
requirements keep
hp_max 266.7
time_cost 90
can_research horse_speed

def workshop
class building
cost 10 15
food_provided 0
hp_max 266.7
time_cost 90
requirements keep
can_train catapult

def temple
class building
cost 15 30
hp_max 300
time_cost 90
requirements keep
can_train priest
can_research super_exorcism superhealer

def dragonslair
class building
cost 15 20
hp_max 266.7
time_cost 90
requirements castle
can_train dragon
can_research dragons_life dragons_attack dragons_breath dragons_armor dragons_speed

def surveillance_tower
class building
provides_survival 0
cost 4 2
time_cost 60
hp_max 33
bonus_height 1
is_buildable_anywhere 1
can_upgrade_to defense_tower bell_tower

def defense_tower
is_a surveillance_tower
cost 7 5
time_cost 85
requirements keep lumbermill
hp_max 66
can_use archer_weapon archer_range
armor 1
range 10
damage 6
cooldown 1
target_types ground air
is_ballistic 1
can_upgrade_to ballista_tower

def ballista_tower
is_a defense_tower
cost 14 10
time_cost 120
requirements castle workshop
hp_max 100
armor 1.5
range 16
damage 10
cooldown 2
minimal_range 4
is_ballistic 1
can_upgrade_to 

def bell_tower
is_a surveillance_tower
cost 7 5
time_cost 85
requirements keep temple
hp_max 50
armor 0.75
heal_level 1
can_research combat_toughness
transport_capacity 10
can_upgrade_to belfry

def belfry
is_a bell_tower
cost 12 8
time_cost 120
requirements castle
hp_max 100
armor 1
range 2
damage 3
cooldown 4
can_research combat_toughness combat_ardor
storable_resource_types 0
transport_capacity 30
can_upgrade_to 

def wall
is_a basic_wall
cost 7 9
time_cost 90
hp_max 500
can_upgrade_to massive_wall

def massive_wall
is_a wall
cost 21 27
time_cost 270
requirements keep
hp_max 2000
can_upgrade_to

def gate
is_a basic_gate
cost 10 10
time_cost 90
hp_max 450
can_upgrade_to massive_gate

def massive_gate
is_a gate
cost 30 30
time_cost 270
requirements keep
hp_max 1800
can_upgrade_to


; traditional units

def serf
is_a peasant
cost 4 0
time_cost 10
hp_max 4
speed 1.5
can_build farm barracks lumbermill blacksmith stables workshop temple  dragonslair small_fort surveillance_tower gate wall
range 0.8
cooldown 1
damage 1.5
can_use combat_toughness combat_ardor

def crossbowman
class soldier
cost 6 2
time_cost 18
hp_max 12
speed 1.5
requirements lumbermill
can_use archer_weapon archer_armor archer_range combat_toughness combat_ardor
armor 0.5
cooldown 3
target_types ground air
range 8
damage 6
is_ballistic 1

def knight
class soldier
cost 14 0
food_cost 2
time_cost 20
hp_max 25
requirements keep stables
can_use melee_weapon melee_armor horse_speed combat_toughness combat_ardor
speed 2.3
speed_bonus 1
armor 1
armor_bonus 1.25
range 1
cooldown 1.5
damage 6
damage_bonus 3
transport_volume 3
can_upgrade_to paladin

def paladin
is_a knight
cost 22 0
time_cost 50
hp_max 30
requirements keep stables temple
damage 9.5
damage_bonus 3.5
range 1.1
cooldown 2.25
is_a_detector 1
can_upgrade_to

def catapult
class soldier
cost 9 5
food_cost 2
time_cost 30
hp_max 30
speed 0.75
minimal_range 4
is_ballistic 1
cooldown 4
damage 8
damage_radius 1
splash 1
is_repairable 1
is_healable 0
transport_volume 4
corpse 0

def priest
class soldier
cost 13 6
food_cost 2
time_cost 20
hp_max 30
hp_max_bonus 5
mana_max 200
mana_regen 1
speed 1
damage 0.1
target_types 
can_use a_holy_vision a_exorcism a_conversion a_resurrection superhealer super_exorcism combat_toughness
heal_level 1
transport_volume 2
is_a_detector 1
harm_target_type undead
harm_level 1

def dragon
class soldier
cost 15 10
food_cost 3
time_cost 20
airground_type air
hp_max 30
speed 1.75
bonus_height 1 ; can see the adjacent squares
range 3
cooldown 3
damage 6
target_types ground air
damage_radius 1
splash 1
transport_volume 99
can_use dragons_life dragons_attack dragons_breath dragons_armor dragons_speed
is_a_detector 1
transport_capacity 2


; traditional upgrades

def super_exorcism
class upgrade
cost 40 10
time_cost 120
effect bonus harm_level 1

def superhealer
class upgrade
cost 80 20
time_cost 150
effect bonus heal_level 2
requirements castle

def combat_toughness
class upgrade
cost 8 4
time_cost 150
effect bonus armor 0.33

def combat_ardor
class upgrade
cost 8 4
time_cost 150
effect bonus damage 0.66

def dragons_life
class upgrade
cost 20 15
time_cost 60
effect bonus hp_max 6

def dragons_attack
class upgrade
cost 20 15
time_cost 60
effect bonus damage 2

def dragons_breath
class upgrade
cost 20 15
time_cost 60
effect bonus range 2

def dragons_armor
class upgrade
cost 20 15
time_cost 60
effect bonus armor 2

def dragons_speed
class upgrade
cost 20 15
time_cost 60
effect bonus speed 0.5




; traditional skills

def holy_vision
class soldier
presence 0 ; casting holy vision on a square doesn't trigger "player has entered the square"
food_cost 0
corpse 0
is_vulnerable 0
is_invisible 1
is_a_detector 1

def a_holy_vision
class ability
mana_cost 125
effect summon 10 holy_vision
effect_target ask
effect_range inf

def exorcism
class effect
harm_level 2
harm_target_type undead
can_use super_exorcism

def a_exorcism
class ability
mana_cost 150
effect summon 60 exorcism
effect_target ask
effect_range 12

def a_resurrection
class ability
mana_cost 150
effect resurrection 6

def a_conversion
class ability
mana_cost 150
effect conversion
effect_target ask






; Technical

def technical
class race
townhall city_hall
farm animal_farm
peasant worker
easy c_technical
aggressive technical


; technical buildings

def city_hall
class building
cost 14 14
hp_max 325
time_cost 135
storable_resource_types 0 1
can_train worker
can_upgrade_to governor_headquarters

def governor_headquarters
is_a city_hall
cost 26 30
hp_max 700
time_cost 250
requirements military_camp
can_upgrade_to chancellor's_palace

def chancellor's_palace
is_a governor_headquarters
cost 42 50
hp_max 1200
time_cost 370
requirements military_camp airship_factory
can_upgrade_to ; starting_point

def animal_farm
class building
cost 8 10
requirements city_hall
food_provided 12
hp_max 133.3
time_cost 60

def military_camp
class building
cost 10 8
hp_max 175
time_cost 60
requirements city_hall
can_train musketeer grenade_launcher

def airship_factory
class building
cost 13 9
hp_max 275
time_cost 90
requirements governor_headquarters
can_train spying_airship fighter_airship bomber_airship transporting_airship
can_research reinforced_structure

def hospital
class building
cost 34 32
time_cost 135
hp_max 266
requirements chancellor's_palace
heal_level 8
can_research public_health

def observation_post
class building
provides_survival 0
cost 6 2
requirements airship_factory
time_cost 70
hp_max 50
bonus_height 1
is_ballistic 1
is_a_detector 1
is_buildable_anywhere 1
can_upgrade_to ballistic_anti_air_battery missile_anti_air_battery

def ballistic_anti_air_battery
is_a observation_post
cost 15 8
requirements blacksmith explosives_magazine
hp_max 60
time_cost 100
range 6
cooldown 1
damage 4
target_types air
splash 1
damage_radius 0.25
can_use high_quality_explosives highest_quality_explosives
can_upgrade_to 

def missile_anti_air_battery
is_a observation_post
cost 15 8
requirements blacksmith explosives_magazine
hp_max 60
time_cost 100
range 12
minimal_range 4
cooldown 5
damage 10
target_types air
splash 1
damage_radius 2
can_use high_quality_explosives highest_quality_explosives
can_upgrade_to 

def hidden_bomb
class building
provides_survival 0
cost 7 3
requirements explosives_magazine
hp_max 10
time_cost 120
is_invisible 1
is_buildable_anywhere 1
can_use a_make_hidden_bomb_explode
mana_max 200
mana_regen 0

def barbed_wire_fence
is_a basic_wall
cost 14 4
hp_max 300
time_cost 15
requirements city_hall
range 3
cooldown 0.25
damage 1
can_upgrade_to camouflaged_barbed_wire_fence barricade

def camouflaged_barbed_wire_fence
is_a barbed_wire_fence
cost 16 12
time_cost 25
hp_max 450
is_a_detector 1
is_invisible 1
armor 0.5
damage 1.5

def barricade
is_a barbed_wire_fence
cost 40 20
hp_max 500
time_cost 45
requirements city_hall military_camp
armor 4
can_upgrade_to fortification bastian

def fortification
is_a basic_wall
cost 40 40
time_cost 70
requirements governor_headquarters military_camp blacksmith
hp_max 1400
is_a_detector 1
armor 8
can_upgrade_to

def bastian
is_a basic_wall
cost 60 50
time_cost 75
requirements chancellor's_palace military_camp explosives_magazine
hp_max 1300
armor 12
bonus_height 1
is_ballistic 1
range 12
minimal_range 4
cooldown 4
damage 15
target_types ground air
can_use high_quality_explosives highest_quality_explosives
can_upgrade_to

def guard_post
is_a basic_gate
cost 16 10
time_cost 20
requirements military_camp city_hall
hp_max 350
armor 2
transport_capacity 4

def guard_house
is_a guard_post
cost 30 25
time_cost 35
requirements governor_headquarters military_camp
hp_max 600
armor 5
transport_capacity 25
is_a_detector 1

def fortified_guard_house
is_a guard_house
cost 70 55
time_cost 50
requirements chancellor's_palace military_camp explosives_magazine blacksmith
hp_max 950
armor 10
transport_capacity 60
range 12
cooldown 2.5
damage 8
target_types ground
damage_radius 1.5
splash 1
minimal_range 4
bonus_height 1
is_ballistic 1
can_use high_quality_explosives highest_quality_explosives

; Technical units

def worker
is_a peasant
cost 5 0
time_cost 10
hp_max 6
hp_max_bonus 2
speed 1.6
can_build animal_farm military_camp airship_factory hospital city_hall blacksmith explosives_magazine hidden_bomb observation_post gate wall
range 0.7
cooldown 1
damage 1
can_use self_defense public_health

def musketeer
class soldier
cost 9 0
time_cost 20
requirements explosives_magazine 
hp_max 15
hp_max_bonus 4
speed 1.3
range 10
cooldown 6
damage 15
target_types ground air
can_use high_quality_explosives highest_quality_explosives melee_armor public_health
is_ballistic 1

def grenade_launcher
class soldier
cost 14 0
time_cost 20
requirements explosives_magazine blacksmith
hp_max 16
hp_max_bonus 4
speed 1
range 12
cooldown 4
damage 8
target_types ground
damage_radius 1.5
splash 1
minimal_range 4
is_ballistic 1
can_use high_quality_explosives highest_quality_explosives melee_armor public_health
armor 0.5
armor_bonus 1
transport_volume 2

def spying_airship
class soldier
cost 5 4
time_cost 15
airground_type air
hp_max 8
hp_max_bonus 3
speed 1.75
damage 0.1
target_types 
bonus_height 1
is_repairable 1
is_healable 0
transport_capacity 1
transport_volume 99
corpse 0
is_a_detector 1
can_use reinforced_structure a_tear_gas
mana_max 200
mana_regen 0

def fighter_airship
class soldier
cost 15 8
food_cost 3
time_cost 30
airground_type air
hp_max 20
hp_max_bonus 5
speed 1.75
requirements explosives_magazine
bonus_height 1
range 9
cooldown 3
damage 12
damage_bonus 3
target_types air
is_repairable 1
is_healable 0
transport_volume 99
corpse 0
can_use high_quality_explosives highest_quality_explosives reinforced_structure
transport_capacity 1

def bomber_airship
class soldier
cost 16 10
food_cost 3
time_cost 30
airground_type air
hp_max 22
hp_max_bonus 6
speed 1.75
requirements explosives_magazine
bonus_height 1
range 0.5
cooldown 5
damage 24
damage_bonus 3
target_types ground
is_repairable 1
is_healable 0
transport_volume 99
corpse 0
damage_radius 4
splash 1
can_use high_quality_explosives highest_quality_explosives reinforced_structure
transport_capacity 1

def transporting_airship
class soldier
cost 15 12
food_cost 2
time_cost 25
requirements blacksmith
airground_type air
hp_max 26
hp_max_bonus 6
speed 1.66
damage 0.1
target_types 
bonus_height 1
is_repairable 1
is_healable 0
transport_capacity 27
transport_volume 99
corpse 0
can_use reinforced_structure



; Technical upgrades

def public_health
class upgrade
cost 60 0
time_cost 80
effect apply_bonus hp_max

def reinforced_structure
class upgrade
cost 35 25
time_cost 80
effect apply_bonus hp_max



; Technical skills

def a_make_hidden_bomb_explode
class ability
mana_cost 200
effect summon 3 small_explosion
effect_target ask
effect_range 6
universal_notification 1

def tear_gas
class effect
harm_level 1
harm_target_type healable
is_a_cloaker 1
is_cloakable 0

def a_tear_gas
class ability
mana_cost 50
effect summon 15 tear_gas
effect_target ask
effect_range 12


; Robots

def robotic
class race
townhall garage
farm hydroponic_farm
peasant geek
easy c_robotic
aggressive robotic


; Robotic buildings

def garage
class building
cost 12 15
time_cost 135
hp_max 150
storable_resource_types 0 1
can_train geek
can_upgrade_to ; starting_point

def hydroponic_farm
class building
cost 16 8
requirements garage
food_provided 24
hp_max 100
time_cost 80

def minicomputer
class building
cost 128 0
time_cost 128
requirements garage
hp_max 128
armor 1
can_upgrade_to mainframe_computer

def mainframe_computer
class building
cost 384 0
time_cost 256
hp_max 256
armor 1
can_upgrade_to supercomputer
is_a minicomputer

def supercomputer
class building
cost 896 0
time_cost 512
hp_max 512
armor 1
can_upgrade_to
is_a mainframe_computer

def robotic_factory
class building
cost 32 0
hp_max 128
time_cost 128
requirements minicomputer
armor 1
can_train magnetic_shooter laser_shooter mobile_sensor magnetic_cannon plasma_cannon drone laser_vessel

def magnecite_extractor
class building
cost 24 0
requirements minicomputer
hp_max 100
time_cost 90
can_research high_quality_magnesite highest_quality_magnesite

def optical_laboratory
class building
cost 32 0
hp_max 128
time_cost 80
requirements mainframe_computer
armor 1
can_research laser_power

def signal_modulator
class building
cost 24 0
hp_max 128
time_cost 80
requirements mainframe_computer
armor 1

def particle_accelerator
class building
cost 64 0
hp_max 256
time_cost 100
requirements supercomputer
armor 1
can_research plasma_power

def laser_tower
class building
provides_survival 0
cost 16 0
hp_max 64
time_cost 100
requirements optical_laboratory
damage 3.33
damage_bonus 1
cooldown 0.33
target_types ground air
range 8
armor 1
is_buildable_anywhere 1
can_use laser_power
bonus_height 1

def radar_tower
class building
provides_survival 0
cost 12 0
hp_max 64
time_cost 100
requirements signal_modulator
armor 1
is_a_detector 1
can_use a_radar_image
mana_max 200
mana_regen 1
is_buildable_anywhere 1
bonus_height 1

def magnetic_tower
class building
provides_survival 0
cost 24 0
requirements magnecite_extractor
hp_max 60
time_cost 120
bonus_height 1 ; can see the adjacent squares
range 3
cooldown 6
damage 10
damage_bonus 3
damage_radius 0.5
splash 1
armor 1 
is_buildable_anywhere 1
can_use a_hypnotic_wave a_magnetic_field a_uncontrolled_magnetic_field high_quality_magnesite highest_quality_magnesite
mana_max 200
mana_regen 0.5
target_types ground air

def electric_trap
class building
provides_survival 0
cost 4 0
requirements magnecite_extractor
hp_max 1
time_cost 30
range 2
cooldown 20
damage 50
is_invisible 1
splash 1
damage_radius 12
is_buildable_anywhere 1
can_use high_quality_magnesite highest_quality_magnesite

def electric_fence
is_a basic_wall
cost 20 0
requirements magnecite_extractor
hp_max 400
time_cost 40
range 3
cooldown 6
damage 30
splash 1
damage_radius 12
can_use high_quality_magnecite highest_quality_magnecite
can_upgrade_to high_voltage_electric_fence

def high_voltage_electric_fence
is_a electric_fence
cost 40 0
requirements magnecite_extractor mainframe_computer
hp_max 600
mana_max 200
mana_regen 2
time_cost 50
armor 2
range 4
damage 60
can_upgrade_to
can_use a_power_surge


def plasma_shield
is_a basic_wall
cost 80 0
requirements particle_accelerator
hp_max 1000
hp_regen 6
mana_max 200
mana_regen 2
time_cost 90
armor 4
range 3
cooldown 0.75
damage 4
splash 1
damage_radius 3
can_use plasma_power a_emergency_power

def electromagnetic_field
is_a basic_gate
cost 30 0
time_cost 20
hp_max 768
hp_regen 16
requirements magnecite_extractor
armor 1.5
is_a_detector 1
is_invisible 1
can_upgrade_to high_voltage_electromagnetic_field

def high_voltage_electromagnetic_field
is_a electromagnetic_field
cost 50 0
time_cost 40
hp_max 1024
hp_regen 8
mana_max 300
mana_regen 2
requirements magnecite_extractor mainframe_computer
armor 2.5
range 6
cooldown 0.5
damage 2
splash 1
damage_radius 12
can_use high_quality_magnecite highest_quality_magnecite a_emp
can_upgrade_to

def laser_gate
is_a basic_gate
cost 30 0
time_cost 30
requirements optical_laboratory
hp_max 500
range 12
damage 3
damage_bonus 1
cooldown 0.25
target_types ground air
can_use laser_power


; Robotic units

def robot
class soldier
food_cost 0
armor 1
is_healable 0
is_repairable 1
corpse 0

def geek
is_a peasant
cost 6 0
time_cost 7
hp_max 6
speed 1.6
can_build hydroponic_farm minicomputer robotic_factory magnecite_extractor signal_modulator optical_laboratory particle_accelerator garage radar_tower laser_tower magnetic_tower electric_trap electromagnetic_field laser_gate electric_fence  plasma_shield
range 0.7
cooldown 1
damage 1

def magnetic_shooter
is_a robot
cost 8 0
time_cost 10
requirements magnecite_extractor
hp_max 8
speed 1.8
damage 2
cooldown 2
target_types ground air
range 6
can_use high_quality_magnesite highest_quality_magnesite

def laser_shooter
is_a robot
cost 8 0
time_cost 8
requirements optical_laboratory
hp_max 8
speed 1.8
damage 2.66
damage_bonus 0.75
cooldown 0.75
target_types ground air
range 7
can_use laser_power

def magnetic_cannon
is_a robot
cost 16 0
time_cost 16
requirements magnecite_extractor
hp_max 8
speed 1.4
damage 4.66
cooldown 3.33
range 12
minimal_range 4
is_ballistic 1
transport_volume 3
can_use high_quality_magnesite highest_quality_magnesite
target_types ground air

def plasma_cannon
is_a robot
cost 24 0
time_cost 24
requirements particle_accelerator
hp_max 16
speed 1.4
damage 10
damage_bonus 3
cooldown 2
range 16
minimal_range 6
is_ballistic 1
splash 1
transport_volume 5
can_use plasma_power
target_types ground air
damage_radius 0.25
can_upgrade_to overheated_plasma_cannon

def overheated_plasma_cannon
is_a plasma_cannon
cost 28 0
requirements 
hp_max 12
armor 0
range 18
damage 12
damage_bonus 4
cooldown 0.75
decay 10
damage_radius 0.5
can_upgrade_to 

def mobile_sensor
is_a robot
cost 8 0
time_cost 8
requirements signal_modulator
hp_max 8
speed 1.8
damage 0.1
target_types 
is_a_detector 1
bonus_height 1

def drone
is_a robot
cost 8 0
time_cost 8
requirements magnecite_extractor signal_modulator
airground_type air
hp_max 8
speed 2
damage 0.1
target_types 
bonus_height 1
is_invisible 1
is_a_detector 1
transport_volume 99

def laser_vessel
is_a robot
cost 16 0
time_cost 16
requirements magnecite_extractor optical_laboratory
airground_type air
hp_max 16
speed 2
damage 1.75
damage_bonus 0.66
cooldown 0.75
target_types ground air
range 7
bonus_height 1
can_use laser_power
transport_volume 99
transport_capacity 1





; Robotic upgrades

def high_quality_magnesite
class upgrade
cost 32 0
time_cost 150
effect bonus damage 1.66

def highest_quality_magnesite
class upgrade
cost 64 0
time_cost 300
requirements high_quality_magnesite
effect bonus damage 2.66

def laser_power
class upgrade
cost 48 0
time_cost 120
effect apply_bonus damage

def plasma_power
class upgrade
cost 80 0
time_cost 120
effect apply_bonus damage


; robotic skills

def magnetic_field
class effect
harm_level 1
harm_target_type unit
is_a_detector 1

def a_magnetic_field
class ability
mana_cost 100
effect summon 90 magnetic_field
effect_target ask
effect_range 12

def a_uncontrolled_magnetic_field
class ability
mana_cost 150
effect summon 90 magnetic_field
effect_target worldrandom
effect_range inf

def a_hypnotic_wave
class ability
mana_cost 50
effect conversion
effect_target ask
effect_range 12

def a_radar_image
class ability
mana_cost 80
effect summon 10 holy_vision
effect_target ask
effect_range inf
universal_notification 1

def emp
class effect
harm_level 40
harm_target_type -healable unit
is_a_detector 1
is_vulnerable 0

def a_emp
class ability
mana_cost 100
requirements signal_modulator
effect summon 10 emp
effect_target ask
effect_range 12

def power_surge
class effect
harm_level 256
harm_target_type ground

def a_power_surge
class ability
mana_cost 200
effect summon 3 power_surge
effect_target self
effect_range 6

def emergency_power
class effect
heal_level 1250

def a_emergency_power
class ability
mana_cost 200
effect summon 1 emergency_power
effect_target self
effect_range 1




; Undeads

def undead
class race
townhall graveyard
farm scavengers_farm
peasant undead_slave
easy c_undead
aggressive undead


; Undead buildings

def graveyard
class building
cost 14 12
time_cost 135
hp_max 150
storable_resource_types 0 1
can_upgrade_to mausoleum
can_train undead_slave

def mausoleum
is_a graveyard
cost 34 28
time_cost 250
requirements vault
hp_max 300
can_upgrade_to necropolis

def necropolis
is_a mausoleum
cost 52 46
time_cost 350
requirements vault crypt
hp_max 450
can_upgrade_to ; starting_point

def scavengers_farm
class building
cost 3 2
requirements graveyard
food_provided 6
hp_max 80
time_cost 45

def vault
class building
cost 11 9
time_cost 75
requirements graveyard
hp_max 130
can_train ghoul skeleton

def crypt
class building
cost 16 16
time_cost 90
requirements mausoleum
hp_max 200
can_train necromancer lich

def labyrinth
class building
cost 20 20
time_cost 180
requirements necropolis
hp_max 300
can_train thestral cursed_gargoyle 
mana_max 200
mana_regen 1
can_use a_soul_absorption

def dark_tower
class building
provides_survival 0
cost 3 3
time_cost 80
hp_max 33
is_invisible 1
is_a_detector 1
bonus_height 1
is_buildable_anywhere 1
can_upgrade_to spectral_tower torments_tower

def spectral_tower
is_a dark_tower
cost 22 8
requirements mausoleum
time_cost 200
can_use a_evil_fog a_call_ectoplasm
mana_max 200
mana_regen 0.5
can_upgrade_to foggy_tower

def foggy_tower
is_a spectral_tower
cost 32 12
requirements necropolis
time_cost 290
can_use a_raise_ghosts a_evil_fog a_call_ectoplasm
mana_regen 0.75
is_invisible 0
is_a_cloaker 1
is_cloakable 0
harm_level 1
harm_target_type healable
can_upgrade_to

def torments_tower
is_a dark_tower
cost 9 7
time_cost 120
requirements crypt
hp_max 50
can_use a_raise_zombies
mana_max 200
mana_regen 0.66
range 3
damage 6
cooldown 5
splash 1
damage_radius 3
target_types ground air
is_invisible 0
can_upgrade_to terrors_tower

def terrors_tower
is_a torments_tower
cost 15 11
time_cost 160
requirements labyrinth
hp_max 66
can_use a_raise_flesh_golems
range 4
damage 9
damage_radius 4
can_upgrade_to 

def bone_trap
class building
provides_survival 0
cost 3 1
time_cost 30
requirements graveyard
hp_max 15
range 2
cooldown 5
damage 10
is_invisible 1
is_buildable_anywhere 1
splash 1
damage_radius 12


; Undead units

def entity
class soldier
food_cost 0
corpse 0
is_healable 0
is_undead 1

def undead_slave
is_a entity
class worker
cost 4 0
time_cost 12
hp_max 4
speed 1.3
;can_use a_improved_wood_gathering
range 1
cooldown 1
damage 1.8
can_build scavengers_farm vault crypt labyrinth graveyard dark_tower bone_trap gate wall

def ghoul
is_a entity
cost 2 0
time_cost 12
hp_max 9
speed 1.5
damage 4.5
cooldown 1.5
range 1
armor 1
armor_bonus 1
can_use melee_armor

def skeleton
is_a entity
cost 3 1
time_cost 10
hp_max 8
speed 1.5
can_use archer_weapon archer_armor archer_range
cooldown 1.5
target_types ground air
range 4.5
damage 2.5

def darkness_tree
class soldier
is_teleportable 0
food_cost 0
hp_max 12
speed 0
can_use a_recycle_deads_into_carnivorous_plants
armor 2
cooldown 1.5
target_types air
range 4
damage 3.5
mana_max 500
mana_regen 0.1
is_healable 0
corpse 0
transport_volume 99

def thestral
class soldier
cost 3 5
time_cost 16
hp_max 10
speed 2
damage 3
cooldown 1.75
range 0.5
target_types ground air
airground_type air
is_invisible 1
is_a_detector 1
transport_volume 99
is_healable 0

def cursed_gargoyle
class soldier
cost 8 16
time_cost 20
food_cost 0
hp_max 12
armor 1.5
speed 2
damage 0.1
target_types 
airground_type air
corpse 0
transport_volume 99
is_healable 0
harm_level 1
harm_target_type healable

def necromancer
class soldier
cost 15 8
food_cost 2
time_cost 30
hp_max 22
mana_max 200
mana_regen 1 ; mana / second
speed 1
can_use a_raise_dead a_cadaveric_explosion a_plagued_cadaver a_sow_darkness_tree a_necromantic_field
range 4.5
cooldown 2
damage 5
target_types ground air
transport_volume 2

def lich
is_a entity
cost 20 10
time_cost 25
hp_max 22
mana_max 200
mana_regen 1
speed 1
can_use a_pass_through_wall a_deadly_fog a_call_spook_lights
range 4.5
cooldown 4
damage 8
target_types ground air
transport_volume 2
is_a_detector 1

def ectoplasm
is_a entity
hp_max 6
speed 2
damage 0.1
target_types 
is_invisible 1
is_a_detector 1
can_use a_bewitchment
mana_max 100
mana_regen 0.5

def zombie
is_a entity
hp_max 16
speed 1
can_use melee_weapon melee_armor
armor 0.5
armor_bonus 1
range 1
cooldown 3
damage 5
damage_bonus 2.5

def armored_specter
is_a entity
hp_max 13
speed 1.25
damage 4
damage_bonus 2
cooldown 1.66
range 1.25
armor 4
armor_bonus 2
can_use melee_weapon melee_armor
is_a_detector 1

def ghost
is_a entity
hp_max 9
speed 2
damage 3
cooldown 1.25
range 3.5
target_types ground air
is_invisible 1
is_a_detector 1

def flesh_golem
is_a entity
hp_max 40
speed 1
range 1
cooldown 4
damage 15
transport_volume 3

def skeletal_dragon
is_a entity
hp_max 20
speed 1.66
damage 8
cooldown 2.5
range 5
splash 1
damage_radius 1.5
target_types ground air
airground_type air
mana_max 200
mana_regen 0.5
transport_volume 99
can_use a_deaths_breath dragons_life dragons_attack dragons_breath dragons_armor dragons_speed
bonus_height 1
is_a_detector 1
transport_capacity 2

def carnivorous_plant
class soldier
is_teleportable 0
food_cost 0
hp_max 4
speed 0
cooldown 1.3
target_types ground
range 1
damage 2.33
is_healable 0
corpse 0
transport_volume 99

def spook_light
is_a entity
hp_max 5
speed 0
damage 1.25
range 2
cooldown 1
target_types ground air
airground_type air
is_a_detector 1
is_vulnerable 0
is_teleportable 0


; Undead upgrades




; Undead skills

def soul_absorption
class effect
harm_level 99999
harm_target_type healable

def a_soul_absorption
class ability
mana_cost 200
effect summon 1 soul_absorption

def evil_fog
class effect
harm_level 2
harm_target_type healable
is_a_cloaker 1
is_cloakable 0

def a_evil_fog
class ability
mana_cost 200
effect summon 90 evil_fog
effect_target ask
effect_range 12

def a_call_ectoplasm
class ability
mana_cost 150
effect summon 150 1 ectoplasm

def a_raise_ghosts
class ability
mana_cost 150
effect raise_dead 600 ghost ghost nothing ghost ghost nothing ghost ghost nothing ghost ghost nothing ghost ghost nothing

def a_raise_zombies
class ability
mana_cost 150
effect raise_dead 600 zombie zombie nothing zombie zombie nothing zombie zombie nothing zombie zombie nothing zombie zombie nothing

def a_raise_flesh_golems
class ability
mana_cost 150
effect raise_dead 600 flesh_golem nothing nothing flesh_golem nothing nothing flesh_golem nothing nothing flesh_golem nothing nothing flesh_golem nothing nothing flesh_golem nothing nothing flesh_golem nothing nothing flesh_golem nothing nothing flesh_golem nothing nothing flesh_golem nothing nothing

def deadly_fog
class effect
harm_level 1
harm_target_type healable

def a_deadly_fog
class ability
mana_cost 150
effect summon 60 deadly_fog
effect_target ask
effect_range 12

def a_raise_dead
class ability
mana_cost 75
effect raise_dead 600 zombie zombie zombie armored_specter armored_specter armored_specter ghost ghost ghost flesh_golem flesh_golem skeletal_dragon

def necromantic_field
class soldier
food_cost 0
corpse 0
is_vulnerable 0
is_invisible 1
is_a_detector 1
mana_max 100
mana_regen 1
can_use a_raise_dead

def a_necromantic_field
class ability
mana_cost 200
effect summon 300 necromantic_field
effect_target ask
effect_range 6

def cadaveric_explosion
class effect
harm_level 10
harm_target_type ground unit

def a_cadaveric_explosion
class ability
mana_cost 50
effect raise_dead 1 cadaveric_explosion cadaveric_explosion cadaveric_explosion cadaveric_explosion cadaveric_explosion cadaveric_explosion cadaveric_explosion cadaveric_explosion cadaveric_explosion cadaveric_explosion
effect_target ask
effect_range 12

def plagued_cadaver
class soldier
food_cost 0
corpse 0
is_vulnerable 0
harm_level 1
harm_target_type ground healable
mana_max 200
mana_regen 0
can_use a_plagued_cadaver

def a_plagued_cadaver
class ability
mana_cost 100
effect raise_dead 90 plagued_cadaver plagued_cadaver plagued_cadaver plagued_cadaver plagued_cadaver plagued_cadaver plagued_cadaver plagued_cadaver plagued_cadaver plagued_cadaver
effect_target ask
effect_range 12

def a_sow_darkness_tree
class ability
mana_cost 175
effect summon 1000 darkness_tree
effect_target ask
effect_range 6

def a_recycle_deads_into_carnivorous_plants
class ability
mana_cost 125
effect raise_dead 600 carnivorous_plant carnivorous_plant carnivorous_plant carnivorous_plant carnivorous_plant carnivorous_plant thorny_plant thorny_plant thorny_plant thorny_plant

def a_call_spook_lights
class ability
mana_cost 200
effect summon 120 2 spook_light
effect_target ask
effect_range 6

def a_pass_through_wall
class ability
mana_cost 200
effect teleportation
effect_target ask
effect_range 12

def deaths_breath
class effect
harm_level 30
harm_target_type healable

def a_deaths_breath
class ability
mana_cost 200
effect summon 3 deaths_breath
effect_target ask
effect_range 12



; Elves

def elven
class race
townhall clearing
farm fruit_farm
peasant harvester
easy c_elven
aggressive elven


; Elven buildings

def clearing
class building
cost 12 18
food_provided 2
hp_max 200
time_cost 135
storable_resource_types 0 1
can_train harvester
can_upgrade_to arboreal_city

def arboreal_city
is_a clearing
cost 26 40
requirements lumbermill wooded_arena
food_provided 5
hp_max 450
time_cost 300
can_upgrade_to domain

def domain
is_a arboreal_city
cost 46 64
requirements leafy_garden sunny_library
food_provided 12
hp_max 900
time_cost 500
can_upgrade_to ; starting_point

def fruit_farm
class building
cost 7 7
requirements clearing
food_provided 15
hp_max 175
time_cost 90

def wooded_arena
class building
cost 6 11
time_cost 100
hp_max 133
food_provided 1
requirements clearing
can_train nimble_archer

def leafy_garden
class building
cost 6 15
time_cost 100
food_provided 2
hp_max 100
requirements arboreal_city
can_train centaur
can_research steel_leaf

def sunny_library
class building
cost 8 14
time_cost 100
food_provided 1
hp_max 100
requirements arboreal_city
can_train erudite
can_research magic_power

def enchanted_forest
class building
cost 9 18
time_cost 175
food_provided 3
hp_max 233
requirements domain
can_train druid
can_research u_unstable_portal u_stable_portal
can_use a_recall
mana_max 200
mana_regen 0.6

def vigilance_tower
class building
provides_survival 0
cost 3 4
time_cost 60
hp_max 33
bonus_height 1
is_buildable_anywhere 1
is_a_detector 1
can_upgrade_to guardtower leafy_tower mirrors_tower

def guardtower
is_a vigilance_tower
cost 7 5
requirements arboreal_city lumbermill
time_cost 100
hp_max 43
range 8
cooldown 0.75
damage 2.5
target_types ground air
armor 1
can_use archer_weapon archer_range
is_ballistic 1
can_upgrade_to high_guard_tower

def high_guard_tower
is_a guardtower
cost 12 8
requirements domain lumbermill
time_cost 160
hp_max 53
range 12
minimal_range 4
cooldown 0.75
can_upgrade_to 

def leafy_tower
is_a vigilance_tower
cost 5 6
requirements leafy_garden
time_cost 100
hp_max 50
is_invisible 1
can_upgrade_to sharp_leaf_tower

def sharp_leaf_tower
is_a leafy_tower
cost 7 8
requirements enchanted_forest
time_cost 160
hp_max 60
range 12
minimal_range 2
is_ballistic 1
cooldown 0.25
damage 0.33
damage_bonus 0.17
target_types ground air
can_use steel_leaf magic_power
can_upgrade_to 

def mirrors_tower
is_a vigilance_tower
cost 6 5
requirements sunny_library
time_cost 120
is_a_cloaker 1
is_cloakable 0
can_upgrade_to solar_tower

def solar_tower
is_a mirrors_tower
cost 10 6
time_cost 220
range  12
minimal_range 2
is_ballistic 1
cooldown 5
damage 2
can_use a_solar_ray
mana_max 200
mana_regen 1
can_upgrade_to 

def root_trap
class building
provides_survival 0
cost 1 3
time_cost 30
hp_max 20
range 3
cooldown 3
damage 6
is_invisible 1
is_buildable_anywhere 1
splash 1
damage_radius 12


; Elven units

def harvester
is_a peasant
cost 3 1
time_cost 10
hp_max 4
speed 1.7
can_build fruit_farm wooded_arena lumbermill leafy_garden sunny_library enchanted_forest clearing vigilance_tower root_trap gate wall
range 1
cooldown 1
damage 1.4

def nimble_archer
class soldier
cost 4 2
time_cost 12
hp_max 9
speed 1.75
requirements lumbermill
can_use a_clone archer_weapon archer_armor archer_range
armor 0.15
cooldown 2
target_types ground air
range 4.5
damage 2.25
can_upgrade_to forest_archer
mana_max 200
mana_regen 0

def nimble_archer_clone
is_a nimble_archer
food_cost 0
hp_max 4
damage 1.1
damage_bonus 1.1
can_use archer_weapon archer_armor archer_range magic_power
can_upgrade_to
mana_max 0
corpse 0
is_teleportable 0

def forest_archer
is_a nimble_archer
cost 6 6
time_cost 25
requirements lumbermill domain enchanted_forest
hp_max 12
armor 0.33
range 6
damage 3.25
is_invisible 1
is_a_detector 1
can_use archer_weapon archer_armor archer_range
mana_max 0
can_upgrade_to
bonus_height 1
is_ballistic 1

def centaur
class soldier
cost 8 4
time_cost 18
hp_max 18
armor 1
speed 2.33
requirements lumbermill
can_use a_wooded_illusion archer_weapon archer_armor archer_range horse_speed
cooldown 2
target_types ground air
range 7.5
damage 3.5
is_a_detector 1
mana_max 200
mana_regen 0.4
is_ballistic 1
transport_volume 3
transport_capacity 1

def erudite
class soldier
cost 6 8
food_cost 2
time_cost 18
hp_max 12
mana_max 200
mana_regen 1
speed 1.5
can_use a_energy_ball a_meteors magic_power
transport_volume 2
range 12
cooldown 5
damage 10
damage_bonus 4
splash 1
target_types ground air
damage_radius 0.25

def energy_ball
class soldier
food_cost 0
hp_max 1
speed 6
is_healable 0
corpse 0
range 3
cooldown 15
damage 30
damage_bonus 20
target_types ground air
transport_volume 99
is_a_detector 1
is_teleportable 0
can_use magic_power

def druid
class soldier
cost 14 14
food_cost 3
time_cost 20
hp_max 15
mana_max 200
mana_regen 0.4
speed 1.33
can_use a_sow_serenity_tree a_unstable_portal a_stable_portal melee_weapon
transport_volume 2
is_a_detector 1
range 1.25
cooldown 2.5
damage 7

def serenity_tree
class soldier
is_teleportable 0
food_cost 0
hp_max 20
speed 0
damage 0.1
target_types 
can_use a_recycle_deads_into_medicinal_plants
armor 4
mana_max 500
mana_regen 0.1
heal_level 4
is_healable 0
corpse 0
transport_volume 99

def medicinal_plant
class soldier
is_teleportable 0
food_cost 0
hp_max 6
speed 0
damage 0.1
target_types 
is_healable 0
corpse 0
heal_level 1
transport_volume 99



; Elven upgrades

def steel_leaf
class upgrade
cost 60 25
time_cost 120
effect bonus damage 1

def magic_power
class upgrade
cost 75 0
time_cost 100
effect apply_bonus damage

def u_unstable_portal
class upgrade
cost 100 0
time_cost 120

def u_stable_portal
class upgrade
cost 400 0
time_cost 180
requirements u_unstable_portal





; Elven skills

def solar_ray
class soldier
food_cost 0
corpse 0
is_vulnerable 0
is_a_detector 1
range  12
cooldown 0.25
damage 2
target_types ground air
transport_volume 99
is_teleportable 0

def a_solar_ray
class ability
mana_cost 200
effect summon 8 solar_ray
effect_target ask
effect_range 12

def wooded_illusion
class effect
is_a_cloaker 1

def a_wooded_illusion
class ability
mana_cost 200
effect summon 60 wooded_illusion

def a_sow_serenity_tree
class ability
mana_cost 175
effect summon 1000 serenity_tree
effect_target ask
effect_range 6

def a_recycle_deads_into_medicinal_plants
class ability
mana_cost 125
effect raise_dead 600 medicinal_plant medicinal_plant medicinal_plant medicinal_plant medicinal_plant medicinal_plant thorny_plant thorny_plant thorny_plant thorny_plant

def a_recall
class ability
mana_cost 150
effect recall
effect_target ask
effect_range inf
universal_notification 1

def a_unstable_portal
class ability
requirements u_unstable_portal
mana_cost 175
effect teleportation
effect_target worldrandom
effect_range inf
universal_notification 1

def a_stable_portal
class ability
requirements u_stable_portal
mana_cost 200
effect teleportation
effect_target ask
effect_range inf
universal_notification 1

def a_energy_ball
class ability
mana_cost 200
effect summon 60 energy_ball

def a_clone
class ability
mana_cost 200
requirements leafy_garden sunny_library
effect summon 10 2 nimble_archer_clone
effect_target ask
effect_range 6

def meteors
class effect
harm_level 6
harm_target_type

def a_meteors
class ability
mana_cost 200
effect summon 5 meteors
effect_target ask
effect_range 12




; Orcs

def orc
class race
townhall encampment
farm pigsty
peasant peon
easy c_orc
aggressive orc

; Orc buildings

def encampment
class building
cost 11 15
food_provided 1
hp_max 300
time_cost 135
storable_resource_types 0 1
can_train peon
can_upgrade_to fortified_encampment

def fortified_encampment
is_a encampment
cost 25 30
hp_max 1000
time_cost 320
can_upgrade_to fortress
requirements pit

def fortress
is_a fortified_encampment
cost 40 50
hp_max 1800
time_cost 695
can_upgrade_to ; starting_point
requirements pit pen

def pigsty
class building
cost 3 7
requirements encampment
food_provided 10
hp_max 133.3
time_cost 60

def pit
class building
cost 5 10
time_cost 90
hp_max 180
requirements encampment
can_train bruiser_troll fireworks_launcher kamikaze

def pen
class building
cost 10 15
hp_max 200
time_cost 100
requirements fortified_encampment
can_train ogre_stone_thrower

def nest
class building
cost 10 15
hp_max 150
time_cost 150
requirements fortified_encampment
can_train winged_serpent hippogriff

def tepee
class building
cost 14 14
hp_max 233
time_cost 180
requirements fortress
can_train voodoo_priest
can_research aggressiveness berserk
is_a_detector 1

def promontory
class building
provides_survival 0
cost 2 4
time_cost 60
hp_max 50
bonus_height 1
is_buildable_anywhere 1
can_upgrade_to cannontower scree

def scree
is_a promontory
cost 6 8
requirements pen
time_cost 120
hp_max 100
range 2
cooldown 6
damage 8
splash 1
damage_radius 0.5
armor 3
can_upgrade_to massive_tower

def massive_tower
is_a scree
cost 8 14
requirements fortress
time_cost 200
hp_max 250
cooldown 5
damage 14
armor 5
can_train transport_ball
transport_capacity 45
can_upgrade_to 

def cannontower
is_a promontory
cost 10 10
requirements fortified_encampment explosives_magazine
time_cost 150
hp_max 60
cooldown 4
damage 8
splash 1
damage_radius 0.5
armor 1
range 12
minimal_range 4
is_ballistic 1
can_use high_quality_explosives highest_quality_explosives
can_upgrade_to grape_shot_tower bombards_tower

def grape_shot_tower
is_a cannontower
cost 15 13
requirements fortress explosives_magazine
time_cost 200
damage 4
damage_radius 4
can_upgrade_to 

def bombards_tower
is_a cannontower
cost 15 13
requirements fortress explosives_magazine
time_cost 200
damage 16
can_upgrade_to 

def spike_trap
class building
provides_survival 0
cost 2 3
time_cost 30
requirements pen
hp_max 20
armor 2
range 2
cooldown 7
damage 15
is_invisible 1
is_buildable_anywhere 1
splash 1
damage_radius 12



; Orc units

def peon
is_a peasant
time_cost 12
hp_max 5
speed 1.4
can_build pigsty pit pen nest tepee encampment explosives_magazine promontory spike_trap  gate wall
range 0.9
cooldown 1
damage 2

def bruiser_troll
class soldier
cost 8 0
time_cost 15
hp_max 20
speed 1.4
range 1
cooldown 1.5
damage 8.5
can_use aggressiveness
transport_volume 2
can_upgrade_to slaughter_troll

def slaughter_troll
is_a bruiser_troll
cost 12 0
food_cost 2
requirements pen
time_cost 30
hp_max 35
speed 1.25
range 1.33
damage 20
transport_volume 3
can_upgrade_to war_troll

def war_troll
is_a slaughter_troll
cost 17 0
food_cost 3
requirements pen tepee
time_cost 45
hp_max 45
armor 2
armor_bonus 1
range 1.66
damage 30
damage_bonus 10
can_use aggressiveness melee_weapon melee_armor
can_upgrade_to berserker_troll

def berserker_troll
is_a war_troll
requirements berserk
hp_max 55
damage 60
cooldown 1
decay 15
can_upgrade_to 

def fireworks_launcher
class soldier
cost 6 1
requirements explosives_magazine
time_cost 12
hp_max 8
speed 1.5
range 5
cooldown 4
damage 4
splash 1
damage_radius 0.25
target_types air
can_use high_quality_explosives highest_quality_explosives

def ogre_stone_thrower
class soldier
cost 15 0
food_cost 3
time_cost 30
hp_max 30
speed 0.75
range 12
minimal_range 4
is_ballistic 1
cooldown 4
damage 15
damage_radius 0.5
splash 1
transport_volume 3
can_use aggressiveness

def winged_serpent
class soldier
cost 4 1
time_cost 10
hp_max 5
speed 2
cooldown 1.5
range 0.5
damage 5
is_a_detector 1
airground_type air
transport_volume 99
target_types ground air
bonus_height 1

def hippogriff
class soldier
cost 12 6
time_cost 18
food_cost 2
requirements tepee
hp_max 30
speed 2.5
cooldown 1.5
range 0.5
damage 15
airground_type air
transport_volume 99
target_types ground air
bonus_height 1
transport_capacity 1

def voodoo_priest
class soldier
cost 30 15
time_cost 30
hp_max 15
mana_max 200
mana_regen 0.1
speed 1
damage 0.1
target_types 
can_use a_possession a_thunderbolt a_cloud_storm
transport_volume 2
is_a_detector 1

def kamikaze
class soldier
cost 9 1
time_cost 20
requirements explosives_magazine tepee
hp_max 12
speed 1.5
range 0.8
cooldown 1.5
damage 1
can_use a_make_kamikaze_explode aggressiveness
mana_max 200
mana_regen 0

def transport_ball
class soldier
cost 20 5
food_cost 0
time_cost 25
hp_max 60
armor 5
speed 2
damage 0.1
target_types 
is_repairable 1
is_healable 0
transport_capacity 15
transport_volume 99
corpse 0



; Orc upgrades

def aggressiveness
class upgrade
cost 40 15
time_cost 180
effect bonus damage 3.5

def berserk
class upgrade
cost 30 10
time_cost 180


; Orc skills

def a_make_kamikaze_explode
class ability
mana_cost 200
effect summon 2 small_explosion
effect_target ask
effect_range 6
universal_notification 1

def a_possession
class ability
mana_cost 200
effect conversion
effect_target ask
effect_range inf
universal_notification 1

def thunderbolt
class effect
harm_level 100
harm_target_type unit

def a_thunderbolt
class ability
mana_cost 100
effect summon 1 thunderbolt
effect_target ask
effect_range 12
universal_notification 1

def cloud_storm
class effect
harm_level 3
harm_target_type air
is_cloakable 0

def a_cloud_storm
class ability
mana_cost 175
effect summon 180 cloud_storm
effect_target ask
effect_range 12




; Elementals

def elemental
class race
townhall fairy_ring
farm power_farm
peasant fairy
easy c_elemental
aggressive elemental


; Elemental buildings

def fairy_ring
class building
cost 15 15
hp_max 200
time_cost 250
storable_resource_types 0 1
can_train fairy
cooldown 4
range 6
damage 5
is_a_detector 1
can_upgrade_to ; starting_point
target_types ground air

def power_farm
class building
cost 20 20
requirements fairy_ring
food_provided 40
hp_max 225
time_cost 200

def earth_tower
class building
cost 150 100
hp_max 500
armor 6
time_cost 1000
bonus_height 1
can_train earth_elemental
is_a_detector 1
damage 8
range 4.5
cooldown 6
splash 1
can_research super_armor
damage_radius 0.25

def fire_tower
class building
cost 75 175
hp_max 300
time_cost 1000
bonus_height 1
can_train fire_elemental
is_a_detector 1
damage 5
range 3
cooldown 3
target_types ground air
splash 1
can_research super_attack
damage_radius 0.25

def water_tower
class building
cost 175 75
hp_max 1000
time_cost 1000
bonus_height 1
can_train water_elemental
is_a_detector 1
damage 2.5
range 6
cooldown 2
target_types ground air
splash 1
can_research super_life
damage_radius 0.25

def air_tower
class building
cost 100 150
hp_max 200
time_cost 1000
bonus_height 1
can_train air_elemental
is_a_detector 1
damage 5
range 4.5
cooldown 3
target_types air
splash 1
can_research super_speed
damage_radius 0.25

def magestower
class building
cost 50 50
hp_max 266.7
time_cost 90
can_train mage
range 4.5
cooldown 1.5
damage 8
target_types ground air


def earth_wall
is_a basic_wall
requirements earth_tower
cost 100 75
hp_max 1000
armor 10
time_cost 650
bonus_height 1

def fire_wall
is_a basic_wall
requirements fire_tower
cost 75 100
hp_max 450
time_cost 400
armor 3
bonus_height 1
is_a_detector 1
damage 5
range 3
cooldown 0.5
target_types ground air
splash 1
damage_radius 1.4

def water_gate
is_a basic_gate
requirements water_tower
cost 125 50
hp_max 800
hp_regen 12
time_cost 500
armor 2
bonus_height 1
is_a_detector 1
heal_level 10

def air_gate
is_a basic_gate
requirements air_tower
cost 50 125
hp_max 600
time_cost 300
is_a_detector 1
is_invisible 1
damage 7
range 7
cooldown 1.7
target_types ground air
splash 1
damage_radius 8.75


; Elemental units

def fairy
class worker
cost 2 2
food_cost 0
time_cost 7
hp_max 3
speed 1.9
damage 0.1
target_types 
transport_volume 99
airground_type air
is_a_detector 1
can_build power_farm earth_tower fire_tower water_tower air_tower magestower fairy_ring earth_wall fire_wall water_gate air_gate

def earth_elemental
class soldier
cost 80 40
time_cost 120
food_cost 0
hp_max 150
hp_max_bonus 30
armor 2
speed 1
speed_bonus 0.75
cooldown 5
range 2
damage 45
damage_bonus 20
damage_radius 2
splash 1
transport_volume 5
is_a_detector 1
can_use super_armor

def fire_elemental
class soldier
cost 30 90
time_cost 120
food_cost 0
hp_max 100
hp_max_bonus 25
speed 1.5
speed_bonus 0.5
cooldown 2
target_types ground air
range 8
damage 30
damage_bonus 10
splash 1
damage_radius 0.25
transport_volume 5
is_a_detector 1
can_use super_attack

def water_elemental
class soldier
cost 90 30
time_cost 140
food_cost 0
hp_max 300
hp_max_bonus 60
speed 1.5
speed_bonus 0.5
cooldown 6
target_types ground
range 12
minimal_range 4
is_ballistic 1
damage 12
damage_radius 6
splash 1
transport_volume 5
is_a_detector 1
can_use super_life

def air_elemental
class soldier
cost 40 80
time_cost 140
food_cost 0
hp_max 50
hp_max_bonus 15
speed 2.66
speed_bonus 1
cooldown 2.5
target_types ground air
range 4
damage 8
damage_bonus 4
splash 1
damage_radius 2
is_invisible 1
target_types ground air
airground_type air
bonus_height 1
transport_volume 99
is_a_detector 1
can_use super_speed

def mage
class soldier
cost 25 25
food_cost 3
time_cost 30
hp_max 30
mana_max 200
mana_regen 1
speed 1
can_use a_earthquake a_fireblast a_recover a_windblast a_volcanic_eruption a_mud_golem a_sandstorm a_vapor_cloud a_magnetic_thunderstorm a_ice_sky
range 4
cooldown 2.5
damage 8
target_types ground air
transport_volume 2


; Elemental upgrades

def super_armor
class upgrade
cost 60 60
time_cost 90
effect bonus armor 2

def super_attack
class upgrade
cost 60 60
time_cost 90
effect apply_bonus damage

def super_life
class upgrade
cost 60 60
time_cost 90
effect apply_bonus hp_max

def super_speed
class upgrade
cost 60 60
time_cost 90
effect apply_bonus speed


; Elemental skills

def earthquake
class effect
harm_level 50
harm_target_type building

def a_earthquake
class ability
requirements earth_tower
mana_cost 200
effect summon 9 earthquake
effect_target ask
effect_range 6

def fireblast
class effect
harm_level 100
harm_target_type ground unit

def a_fireblast
class ability
requirements fire_tower
mana_cost 200
effect summon 1 fireblast
effect_target ask
effect_range 6

def recover
class effect
heal_level 100

def a_recover
class ability
requirements water_tower
mana_cost 200
effect summon 1 recover
effect_target ask
effect_range 6

def a_windblast
class ability
mana_cost 200
effect teleportation
effect_target ask
effect_range 12

def volcanic_eruption
class effect
harm_level 100
harm_target_type ground

def a_volcanic_eruption
class ability
requirements earth_tower fire_tower
mana_cost 200
effect summon 90 volcanic_eruption
effect_target ask
effect_range 6

def mud_golem
class soldier
food_cost 0
hp_max 60
armor 1
speed 1
range 1
cooldown 4
damage 8
splash 1
damage_radius 1
transport_volume 3
corpse 0

def a_mud_golem
class ability
requirements earth_tower water_tower
mana_cost 200
effect summon 90 mud_golem

def sandstorm
class effect
harm_level 6
harm_target_type unit

def a_sandstorm
class ability
requirements earth_tower air_tower
mana_cost 200
effect summon 90 sandstorm
effect_target ask
effect_range 6

def vapor_cloud
class effect
is_a_cloaker 1
is_cloakable 0

def a_vapor_cloud
class ability
requirements fire_tower water_tower
mana_cost 200
effect summon 90 vapor_cloud
effect_target ask
effect_range 6

def magnetic_thunderstorm
class soldier
food_cost 0
corpse 0
is_vulnerable 0
is_invisible 0
is_a_detector 1
range 9
cooldown 5
damage 15
damage_bonus 3
target_types air ground
splash 1
damage_radius 1
airground_type air
speed 0
transport_volume 99
can_use high_quality_magnesite highest_quality_magnesite
is_teleportable 0

def a_magnetic_thunderstorm
class ability
mana_cost 200
requirements fire_tower air_tower
effect summon 90 magnetic_thunderstorm
effect_target ask
effect_range 6

def ice_sky
class effect
harm_level 100
harm_target_type air

def a_ice_sky
class ability
requirements water_tower air_tower
mana_cost 200
effect summon 90 ice_sky
effect_target ask
effect_range 6


; Savages

def savage
class race
townhall hideout
farm hunting_ground
peasant outlaw
easy c_savage
aggressive savage


; Savage buildings

def hideout
class building
cost 12 12
time_cost 120
hp_max 166
storable_resource_types 0 1
can_train outlaw
is_invisible 1
can_upgrade_to thicket_of_the_brigands

def thicket_of_the_brigands
is_a hideout
cost 26 28
time_cost 300
requirements trainings_bivouac
hp_max 375
is_invisible 0
can_upgrade_to freebooters_wood

def freebooters_wood
is_a thicket_of_the_brigands
cost 42 48
time_cost 550
requirements burrow
hp_max 750
can_upgrade_to ; starting_point

def hunting_ground
class building
cost 2 4
requirements hideout
food_provided 7
hp_max 75
time_cost 35

def trainings_bivouac
class building
cost 7 9
time_cost 90
requirements hideout
hp_max 133
can_train huntress archer

def burrow
class building
cost 14 10
food_cost 6
time_cost 140
requirements thicket_of_the_brigands
hp_max 175

def mahouts_house
class building
cost 10 16
food_cost 6
time_cost 140
requirements thicket_of_the_brigands
hp_max 175
can_train mahout

def wild_beasts_cage
class building
cost 16 12
food_cost 12
time_cost 140
requirements freebooters_wood
hp_max 275

def spells_hut
class building
cost 18 15
time_cost 160
requirements freebooters_wood
hp_max 175
can_train witch

def arrows_trap
class building
provides_survival 0
cost 1 4
requirements lumbermill
time_cost 30
is_invisible 1
is_buildable_anywhere 1
hp_max 5
range 5
damage 3
cooldown 3
target_types ground air
can_use archer_weapon archer_range




; Savage units

def outlaw
class worker
cost 3 1
time_cost 12
hp_max 6
can_build hunting_ground trainings_bivouac lumbermill burrow mahouts_house wild_beasts_cage spells_hut hideout gate wall
speed 1.6
range 5.5
cooldown 2
damage 2.5
splash 1
damage_radius 0.25

def huntress
class soldier
cost 10 1
time_cost 18
hp_max 15
speed 1.75
can_use a_charm_snakes a_tame_wolves a_tame_lions a_call_winged_horses melee_weapon
armor 0.25
range 1.75
cooldown 1.5
damage 4.5
damage_bonus 2
mana_max 200
mana_regen 0.75
is_a_detector 1

def mahout
class soldier
cost 6 1
time_cost 24
hp_max 12
speed 1.5
can_use a_tame_elephants
range 2
cooldown 1.5
damage 2.5
mana_max 200
mana_regen 0.75

def archer
class soldier
cost 5 1
time_cost 15
hp_max 10
speed 1.5
requirements lumbermill
can_use archer_weapon archer_armor archer_range a_set_arrows_trap
cooldown 2.25
target_types ground air
range 4
damage 2.5
armor 0.5
is_ballistic 1
mana_max 200
mana_regen 0

def snake
class soldier
cost 3 1
time_cost 25
hp_max 3
speed 1.65
cooldown 1.5
range 0.5
damage 5
is_invisible 1
is_a_detector 1

def wolf
class soldier
hp_max 8
speed 2.3
range 0.5
cooldown 1.2
damage 5

def lion
class soldier
food_cost 2
hp_max 12
speed 1.65
range 0.5
cooldown 1.4
damage 12

def winged_horse
class soldier
food_cost 2
hp_max 20
speed 2.5
damage 4
cooldown 1.75
range 0.5
target_types ground air
airground_type air
transport_volume 99
transport_capacity 2

def elephant
class soldier
food_cost 3
hp_max 40
speed 1.33
armor 0.25
range 1.5
cooldown 2
damage 16
transport_volume 4
transport_capacity 2
can_upgrade_to elephant_with_turret

def elephant_with_turret
is_a elephant
cost 10 5
requirements mahouts_house lumbermill
food_cost 5
time_cost 30
hp_max 55
speed 1.25
can_use archer_weapon archer_armor archer_range a_set_arrows_trap
target_types ground air
range 5
damage 2.5
cooldown 1.1
armor 1
is_ballistic 1
mana_max 400
mana_regen 0
transport_volume 6
transport_capacity 0

def witch
class soldier
cost 14 14
food_cost 3
time_cost 30
hp_max 15
mana_max 200
mana_regen 0.6
speed 1.33
can_use a_green_storm a_swarm a_penetrating_roots a_sow_sentinel_tree a_sow_vine a_bewitchment
range 12
cooldown 8
damage 6
damage_radius 10
splash 1
target_types ground air
transport_volume 2

def peaceful_vine
class soldier
is_teleportable 0
food_cost 0
food_provided 2
hp_max 40
speed 0
damage 0.1
target_types 
is_healable 0
corpse 0
transport_volume 99
can_upgrade_to invasive_vine

def invasive_vine
is_a peaceful_vine
cost 2 3
time_cost 30
armor 1
damage 4.5
target_types ground
cooldown 2
range 12
mana_max 200
mana_regen 0.5
can_use a_sow_vine
can_upgrade_to 



; Savage upgrades




; Savage skills

def a_charm_snakes
class ability
mana_cost 150
requirements burrow
effect summon 200 2 snake

def a_tame_wolves
class ability
mana_cost 175
requirements burrow
effect summon 200 2 wolf

def a_tame_lions
class ability
mana_cost 200
requirements wild_beasts_cage
effect summon 200 2 lion

def a_call_winged_horses
class ability
mana_cost 200
requirements spells_hut
effect summon 200 1 winged_horse

def a_tame_elephants
class ability
mana_cost 200
effect summon 0 1 elephant

def a_set_arrows_trap
class ability
mana_cost 200
effect summon 0 arrows_trap
effect_target ask
effect_range 6

def swarm
class effect
harm_level 3
harm_target_type healable

def a_swarm
class ability
mana_cost 200
effect summon 360 swarm
effect_target ask
effect_range 12

def green_storm
class effect
harm_level 1
harm_target_type unit

def a_green_storm
class ability
mana_cost 200
effect summon 360 green_storm
effect_target ask
effect_range 12

def penetrating_roots
class effect
harm_level 3
harm_target_type building

def a_penetrating_roots
class ability
mana_cost 200
effect summon 360 penetrating_roots
effect_target ask
effect_range 12

def sentinel_tree
class soldier
is_teleportable 0
food_cost 0
hp_max 15
speed 0
armor 2
cooldown 1.5
target_types air
range 4
damage 3
is_healable 0
corpse 0
transport_volume 99
bonus_height 1
is_invisible 1
is_a_detector 1

def a_sow_sentinel_tree
class ability
mana_cost 175
effect summon 0 sentinel_tree
effect_target ask
effect_range 6

def a_sow_vine
class ability
mana_cost 150
effect summon 0 peaceful_vine
effect_target ask
effect_range 12



; Vermin

def vermin
class race
townhall brooder
farm fruit_tree
peasant walking_worker
easy c_vermin
aggressive vermin


; Vermin buildings

def vermin_building
class building
storable_resource_types 0 1
is_buildable_anywhere 1
mana_max 200
mana_regen 1
damage 0.1
target_types  
can_use a_stump

def stump
class building
cost 0 0
time_cost 0
is_buildable_anywhere 1
hp_max 50
can_upgrade_to brooder termite_nest honey_tree mud_room mushroom_gallery twinkling_tree carnivorous_tree fruit_tree 

def brooder
is_a vermin_building
cost 0 18
time_cost 60
food_provided 1
hp_max 80
is_invisible 1
can_use a_larvae1 a_stump
can_upgrade_to nursery

def nursery
is_a brooder
cost 0 30
time_cost 90
hp_max 100
heal_level 1
can_use a_larvae2 a_stump
can_upgrade_to larval_laboratory

def larval_laboratory
is_a nursery
mana_regen 1.25
cost 0 55
time_cost 220
hp_max 200
heal_level 2
can_use a_larvae3 a_stump
storage_bonus 0 1
can_upgrade_to transgenic_reproducer

def transgenic_reproducer
is_a larval_laboratory
mana_regen 1.5
cost 0 95
time_cost 380
hp_max 300
heal_level 3
can_use a_larvae4 a_survival_pheromone a_stump
storage_bonus 0 2
can_upgrade_to multiplier_incubator

def multiplier_incubator
is_a transgenic_reproducer
mana_regen 1.75
cost 0 150
time_cost 500
hp_max 500
heal_level 4
can_use a_larvae5 a_survival_pheromone a_stump
storage_bonus 0 3
can_upgrade_to 

def fruit_tree
is_a vermin_building
cost 0 8
time_cost 60
hp_max 50
food_provided 10

def termite_nest
is_a vermin_building
cost 0 20
time_cost 60
hp_max 75
food_provided 5
is_invisible 1
mana_regen 0.2
can_use a_stump a_supply_tunnel

def honey_tree
is_a vermin_building
cost 0 16
time_cost 90
hp_max 50
food_provided 8

def mud_room
is_a vermin_building
cost 0 25
time_cost 90
hp_max 75
is_invisible 1

def mushroom_gallery
is_a vermin_building
cost 0 18
time_cost 90
hp_max 75
food_provided 5
is_invisible 1
can_use a_toxic_spores a_hallucinogenic_spores a_healing_spores a_stump

def twinkling_tree
is_a vermin_building
cost 0 15
time_cost 75
hp_max 50
can_use a_stump

def carnivorous_tree
is_a vermin_building
cost 0 8
time_cost 75
hp_max 50
damage 5
range 5
cooldown 1
target_types ground air
can_upgrade_to voracious_tree

def voracious_tree
is_a carnivorous_tree
cost 0 20
requirements larval_laboratory
time_cost 150
hp_max 90
damage 8
range 8
cooldown 0.8
can_upgrade_to devourer_tree

def devourer_tree
is_a voracious_tree
cost 0 35
requirements transgenic_reproducer
time_cost 225
hp_max 120
damage 12
range 12
cooldown 0.4
can_upgrade_to 

def supply_tunnel
is_a vermin_building
provides_survival 0
hp_max 20
mana_max 0
mana_regen 0
can_use 




; Vermin units

def larvae
class soldier
cost 0 0
time_cost 0
hp_max 1
food_cost 0
speed 0
damage 0.1
target_types 
corpse 0
can_upgrade_to walking_worker guardian_termite angry_wasp pinch_crab insatiable_mosquito rowdy_mushroom scout_firefly

def walking_worker
class worker
cost 0 1
time_cost 3
hp_max 3
food_cost 0
food_provided 1
speed 1.75
damage 1
range 0.5
cooldown 2.5
can_upgrade_to winged_worker

def winged_worker
is_a walking_worker
cost 0 2
time_cost 20
requirements larval_laboratory
food_provided 2
speed 2.25
cooldown 2
target_types ground air
airground_type air
transport_volume 99
can_build  gate wall
can_upgrade_to royal_worker

def royal_worker
is_a winged_worker
cost 0 5
time_cost 60
requirements transgenic_reproducer
food_provided 4
speed 2.75
damage 1.5
cooldown 1.75
can_upgrade_to 

def guardian_termite
class soldier
cost 0 2
time_cost 5
requirements termite_nest
hp_max 4
speed 1.75
damage 2.5
range 0.5
cooldown 1.5
armor 0.5
is_a_detector 1
can_upgrade_to conqueror_termite

def conqueror_termite
is_a guardian_termite
cost 0 4
time_cost 25
requirements termite_nest larval_laboratory
hp_max 6
speed 2
damage 7.5
armor 1.25
can_upgrade_to armored_termite

def armored_termite
is_a conqueror_termite
cost 0 7
time_cost 75
requirements termite_nest transgenic_reproducer
food_cost 2
hp_max 12
damage 12
armor 2.5
transport_volume 2
can_upgrade_to 

def angry_wasp
class soldier
cost 0 2
time_cost 5
requirements honey_tree
hp_max 5
speed 2.25
damage 2
range 0.5
cooldown 1.5
target_types ground air
armor 0.25
airground_type air
transport_volume 99
can_upgrade_to sting_shooter_wasp

def sting_shooter_wasp
is_a angry_wasp
cost 0 4
time_cost 30
requirements honey_tree larval_laboratory
hp_max 8
speed 2.33
range 3
armor 0.5
can_upgrade_to thousand_stings_wasp

def thousand_stings_wasp
is_a sting_shooter_wasp
cost 0 7
time_cost 60
requirements honey_tree transgenic_reproducer
food_cost 2
hp_max 12
speed 2.5
range 4
cooldown 0.5
armor 0.75
can_upgrade_to 

def insatiable_mosquito
class soldier
cost 0 2
time_cost 5
requirements mud_room
hp_max 4
speed 1.25
damage 3
range 0.5
cooldown 2
target_types ground air
armor 0.25
is_a_detector 1
airground_type air
transport_volume 99
can_upgrade_to terrible_mosquito

def terrible_mosquito
is_a insatiable_mosquito
cost 0 4
time_cost 30
requirements mud_room larval_laboratory
hp_max 7
speed 1.5
damage 7
cooldown 1.75
can_upgrade_to bloodthirsty_mosquito

def bloodthirsty_mosquito
is_a terrible_mosquito
cost 0 7
time_cost 75
requirements mud_room transgenic_reproducer
food_cost 2
hp_max 10
speed 1.75
damage 14
cooldown 1.66
can_upgrade_to 

def pinch_crab
class soldier
cost 0 2
time_cost 4
requirements mud_room
hp_max 4
speed 1.75
damage 2.5
range 0.5
cooldown 1.5
armor 1
can_upgrade_to shell_shooter_crab

def shell_shooter_crab
is_a pinch_crab
cost 0 4
time_cost 35
requirements mud_room larval_laboratory
hp_max 6
speed 1.5
damage 4.5
range 10
cooldown 2
armor 1.5
minimal_range 1
is_ballistic 1
transport_volume 2
can_upgrade_to siege_crab

def siege_crab
is_a shell_shooter_crab
cost 0 7
time_cost 90
requirements mud_room transgenic_reproducer
food_cost 2
hp_max 9
speed 1.25
damage 6.5
range 16
minimal_range 2
cooldown 2.5
splash 1
damage_radius 1
armor 2
transport_volume 3
can_upgrade_to 

def rowdy_mushroom
class soldier
cost 0 2
time_cost 6
requirements mushroom_gallery
food_cost 0
hp_max 6
speed 1.5
damage 1.5
range 0.5
cooldown 1.5
corpse 0
is_healable 0
can_upgrade_to toxic_mushroom

def toxic_mushroom
is_a rowdy_mushroom
cost 0 4
time_cost 35
requirements mushroom_gallery larval_laboratory
hp_max 15
damage 2.5
harm_level 1
harm_target_type ground healable
can_upgrade_to devastating_mushroom

def devastating_mushroom
is_a toxic_mushroom
cost 0 7
time_cost 90
requirements mushroom_gallery transgenic_reproducer
hp_max 28
damage 5
harm_level 5
transport_volume 2
can_upgrade_to 

def scout_firefly
class soldier
cost 0 2
time_cost 3
requirements twinkling_tree
hp_max 3
speed 1.5
damage 0.1
target_types  
is_a_detector 1
bonus_height 1
airground_type air
transport_volume 99
can_upgrade_to dazzling_firefly

def dazzling_firefly
is_a scout_firefly
cost 0 4
time_cost 25
requirements twinkling_tree larval_laboratory
hp_max 5
is_a_cloaker 1
is_cloakable 0
can_upgrade_to blazing_firefly

def blazing_firefly
is_a dazzling_firefly
cost 0 7
time_cost 100
requirements twinkling_tree transgenic_reproducer
food_cost 2
hp_max 7
damage 3
range 3
cooldown 2
target_types ground air
splash 1
damage_radius 0.25
mana_max 200
mana_regen 0.1
can_use a_blaze
can_upgrade_to 



; Vermin skills

def a_stump
class ability
mana_cost 200
effect summon 150 stump
effect_target ask
effect_range 12

def a_larvae1
class ability
mana_cost 200
effect summon 120 6 larvae

def a_larvae2
class ability
mana_cost 200
effect summon 120 9 larvae

def a_larvae3
class ability
mana_cost 200
effect summon 120 13 larvae

def a_larvae4
class ability
mana_cost 200
effect summon 120 18 larvae

def a_larvae5
class ability
mana_cost 200
effect summon 120 24 larvae

def a_supply_tunnel
class ability
mana_cost 200
effect summon 0 1 supply_tunnel 4 walking_worker 4 guardian_termite
effect_target ask
effect_range 24

def a_survival_pheromone
class ability
mana_cost 200
effect resurrection 100
effect_target ask
effect_range 12

def toxic_spores
class effect
harm_level 6
harm_target_type healable
is_invisible 1

def a_toxic_spores
class ability
mana_cost 175
effect summon 60 toxic_spores
effect_target ask
effect_range 12

def hallucinogenic_spores
class effect
is_a_cloaker 1

def a_hallucinogenic_spores
class ability
mana_cost 175
effect summon 60 hallucinogenic_spores
effect_target ask
effect_range 12

def healing_spores
class effect
heal_level 6
is_invisible 1

def a_healing_spores
class ability
mana_cost 175
effect summon 60 healing_spores
effect_target ask
effect_range 12

def blaze
class effect
harm_level 6
harm_target_type ground

def a_blaze
class ability
mana_cost 200
effect summon 30 blaze
effect_target ask
effect_range 6





; Dark Elves

def dark_elf
class race
townhall shack
farm aviary
peasant thief
easy c_dark_elf
aggressive dark_elf


; Dark Elf buildings

def shack
class building
cost 7 12
time_cost 90
hp_max 80
storable_resource_types 0 1
can_train thief
can_upgrade_to villa

def villa
is_a shack
requirements cutlery
cost 15 26
time_cost 250
hp_max 200
can_upgrade_to manor

def manor
is_a villa
requirements cutlery playhouse
cost 28 40
time_cost 400
hp_max 350
can_upgrade_to 

def aviary
class building
cost 6 6
requirements shack
food_provided 9
hp_max 80
time_cost 80

def cutlery
class building
cost 6 10
time_cost 75
requirements shack
hp_max 100
can_train prowler

def playhouse
class building
cost 8 14
time_cost 120
requirements villa
hp_max 150
can_train darkarcher illusionist
can_research throwing_technique animation_speed

def cenacle
class building
cost 12 20
time_cost 180
requirements manor
hp_max 175
can_train doctor

def watchfulness_turret
class building
provides_survival 0
cost 2 3
time_cost 30
hp_max 25
bonus_height 1
is_buildable_anywhere 1
is_invisible 1
is_a_detector 1
can_upgrade_to ambush_turret perch_tower

def ambush_turret
is_a watchfulness_turret
cost 7 5
time_cost 50
requirements cutlery
hp_max 33
can_use melee_weapon throwing_technique
range 4
range_bonus 1
cooldown 1
damage 4.5
damage_bonus 1
can_upgrade_to ambush_high_tower

def ambush_high_tower
is_a ambush_turret
cost 12 7
time_cost 100
requirements manor cutlery
hp_max 50
range 5
range_bonus 1.5
cooldown 0.66
target_types ground air
can_upgrade_to 

def perch_tower
is_a watchfulness_turret
cost 5 5
time_cost 60
can_use a_pigeon
mana_max 200
mana_regen 0.5
is_invisible 0
can_upgrade_to windy_tower

def windy_tower
is_a perch_tower
cost 10 8
requirements cenacle
time_cost 100
hp_max 50
can_use a_pigeon a_whirlwind
mana_regen 0.6
can_upgrade_to 



; Dark Elf units

def thief
is_a peasant
cost 4 1
time_cost 7
hp_max 4
speed 1.8
can_build aviary cutlery playhouse cenacle shack watchfulness_turret lumbermill blacksmith gate wall
damage 0
is_invisible 1
is_a_detector 1

def prowler
class soldier
cost 6 0
time_cost 12
hp_max 10
speed 1.66
can_use melee_weapon melee_armor
armor 0.5
armor_bonus 1
range 1
cooldown 1.33
damage 4.5
damage_bonus 2.5
is_a_detector 1
can_upgrade_to assassin

def assassin
is_a prowler
cost 9 0
time_cost 20
requirements villa
hp_max 12
damage 8
is_invisible 1
can_upgrade_to master_assassin

def master_assassin
is_a assassin
cost 15 0
time_cost 50
requirements cenacle
hp_max 14
damage 12
can_use melee_weapon melee_armor a_fatal_blade
mana_max 200
mana_regen 0.2
can_upgrade_to

def darkarcher
class soldier
cost 5 1
time_cost 15
hp_max 9
speed 1.75
requirements lumbermill
can_use archer_weapon archer_armor archer_range a_rain_of_arrows
cooldown 2.1
target_types ground air
range 4.5
damage 3.3
armor 0.5
is_invisible 1
is_a_detector 1
is_ballistic 1
mana_max 200
mana_regen 0.75

def illusionist
class soldier
cost 8 3
time_cost 18
hp_max 10
speed 1.66
can_use melee_weapon throwing_technique a_call_shadows a_puppet a_smoke
range 4
range_bonus 1
cooldown 2.75
damage 4.5
damage_bonus 1
mana_max 200
mana_regen 0.5
is_a_detector 1

def doctor
class soldier
cost 12 6
time_cost 30
hp_max 15
mana_max 200
mana_regen 0.5
speed 1.5
can_use throwing_technique a_flying_shuriken a_root_system a_vortex a_bewitchment
range 5
range_bonus 1.5
cooldown 2.25
damage 2.5
target_types ground air
transport_volume 2
is_a_detector 1

def shadow
class soldier
food_cost 0
is_vulnerable 0
is_teleportable 0
corpse 0
speed 2.5
can_use melee_weapon
range 1
cooldown 1.1
damage 2
damage_bonus 1
is_a_detector 1

def puppet
class soldier
food_cost 0
hp_max 8
speed 1.66
speed_bonus 0.1
can_use melee_weapon archer_armor animation_speed
armor 0.5
range 1
cooldown 1.33
damage 3
damage_bonus 1
is_healable 0
corpse 0


def pigeon
class soldier
food_cost 0
hp_max 3
speed 2.25
range 0.5
cooldown 1
damage 1
target_types air
transport_volume 99
airground_type air

def flying_shuriken
class soldier
food_cost 0
hp_max 1
speed 10
is_healable 0
corpse 0
range 0.5
cooldown 1
damage 1.5
damage_bonus 1
target_types ground air
transport_volume 99
is_teleportable 0
airground_type air

def vortex
class soldier
food_cost 0
damage 0.1
target_types  
is_healable 0
corpse 0
transport_volume 99
is_teleportable 0
is_vulnerable 0
can_use a_recall
mana_max 200
mana_regen 0.75
storable_resource_types 0 1

def whirlwind
class soldier
food_cost 0
is_healable 0
corpse 0
transport_volume 99
is_teleportable 0
is_vulnerable 0
transport_capacity 12
airground_type air
speed 0.75
damage 0.1
target_types  
harm_level 1
harm_target_type air
is_cloakable 0

def root_system
class soldier
is_teleportable 0
food_cost 0
hp_max 15
range 12
minimal_range 2
is_ballistic 1
cooldown 3
damage 6
is_invisible 1
bonus_height 1
is_healable 0
corpse 0
transport_volume 99


; Dark Elf upgrades

def throwing_technique
class upgrade
cost 8 10
time_cost 80
effect apply_bonus range

def animation_speed
class upgrade
cost 8 10
time_cost 80
effect apply_bonus speed



; Dark Elf skills

def a_pigeon
class ability
mana_cost 200
requirements aviary
effect summon 0 2 pigeon

def a_whirlwind
class ability
mana_cost 200
effect summon 150 1 whirlwind

def fatal_blade
class soldier
food_cost 0
is_healable 0
corpse 0
transport_volume 99
is_teleportable 0
is_vulnerable 0
damage 9999
cooldown 2
range 12
target_types ground air

def a_fatal_blade
class ability
mana_cost 200
effect summon 1 fatal_blade
effect_target ask
effect_range 6

def rain_of_arrows
class soldier
food_cost 0
is_healable 0
corpse 0
transport_volume 99
is_teleportable 0
is_vulnerable 0
damage 3
cooldown 0.12
range 12
target_types ground air
can_use archer_weapon

def a_rain_of_arrows
class ability
mana_cost 200
effect summon 1 rain_of_arrows
effect_target ask
effect_range 6

def a_call_shadows
class ability
mana_cost 200
effect summon 5 2 shadow
effect_target ask
effect_range 6

def a_puppet
class ability
mana_cost 175
requirements lumbermill
effect summon 0 puppet

def smoke
class effect
is_a_cloaker 1
is_cloakable 0

def a_smoke 
class ability
mana_cost 175
effect summon 300 smoke
effect_target ask
effect_range 6

def a_flying_shuriken
class ability
mana_cost 200
effect summon 60 4 flying_shuriken

def a_root_system
class ability
mana_cost 175
effect summon 300 1 root_system
effect_target ask
effect_range 6

def a_vortex 
class ability
mana_cost 200
effect summon 300 vortex
effect_target ask
effect_range 6